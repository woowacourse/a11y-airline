<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸš€ í•­ê³µì‚¬ ì›¹ì‚¬ì´íŠ¸ì˜ ì»´í¬ë„ŒíŠ¸ ì ‘ê·¼ì„± ë†’ì´ê¸°</title>
    <link
      crossorigin
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script
      crossorigin
      src="https://unpkg.com/react@17.0.2/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/babel-standalone@6.26.0/babel.js"
    ></script>
    <style>
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }
    </style>
  </head>
  <body>
    <div id="root" class="mx-auto w-64 mt-20"></div>
    <script type="text/babel">
      const MIN_COUNT = 0;
      const MAX_COUNT = 3;

      const reducer = (state, action) => {
        switch (action.type) {
          case "minus/clicked": {
            if (state.value <= MIN_COUNT) {
              return {
                value: MIN_COUNT,
                alertMessage: `ì„±ì¸ ìŠ¹ê° í˜„ì¬${MIN_COUNT}ëª…`,
                validationMessage: `ì„±ì¸ ìŠ¹ê°ì€ ${MIN_COUNT}ëª… ë¯¸ë§Œì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤`,
              };
            }

            const value = state.value - 1;

            return {
              value,
              alertMessage: `ì„±ì¸ ìŠ¹ê° ê°ì†Œ í˜„ì¬ ${value}ëª…`,
              validationMessage: "",
            };
          }

          case "plus/clicked": {
            if (state.value >= MAX_COUNT) {
              return {
                value: MAX_COUNT,
                alertMessage: `ì„±ì¸ ìŠ¹ê° í˜„ì¬ ${MAX_COUNT}ëª…`,
                validationMessage: `ì„±ì¸ ìŠ¹ê°ì€ ${MAX_COUNT}ëª… ì´ˆê³¼ê°€ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤`,
              };
            }

            const value = state.value + 1;

            return {
              value,
              alertMessage: `ì„±ì¸ ìŠ¹ê° ì¦ê°€ í˜„ì¬ ${value}ëª…`,
              validationMessage: "",
            };
          }

          case "input/changed": {
            const value = action.payload;
            const number = Number(value);

            if (value === "" || Number.isNaN(number)) {
              return {
                ...state,
                value: "",
                validationMessage: "",
              };
            }

            if (number < MIN_COUNT || number > MAX_COUNT) {
              const alertMessage = `${MIN_COUNT} ì´ìƒ ${MAX_COUNT} ì´í•˜ì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”`;

              return {
                ...state,
                alertMessage,
                validationMessage: alertMessage,
              };
            }

            const alertMessage = `ì„±ì¸ ìŠ¹ê° ${
              number > state.value ? "ì¦ê°€" : "ê°ì†Œ"
            } í˜„ì¬ ${number}ëª…`;

            return { value: number, alertMessage, validationMessage: "" };
          }
          default:
            return { ...state };
        }
      };

      const Component = () => {
        const [state, dispatch] = React.useReducer(reducer, {
          value: 0,
          alertMessage: "",
          validationMessage: "",
        });

        const onMinusClick = () => dispatch({ type: "minus/clicked" });
        const onPlusClick = () => dispatch({ type: "plus/clicked" });
        const onChange = (event) =>
          dispatch({ type: "input/changed", payload: event.target.value });

        return (
          <React.Fragment>
            <header>
              <h1 className="font-bold text-4xl">ìŠ¹ê° ì„ íƒ</h1>
            </header>
            <main className="flex flex-col gap-y-8 mt-12">
              <div className="flex font-bold  items-center">
                <h2 className="text-2xl">
                  <label htmlFor="adult-value-input">ì„±ì¸</label>
                </h2>
              </div>
              <section>
                <div className="flex mb-4">
                  <button
                    className="border border-gray-600 rounded-full text-3xl flex justify-center items-center w-12 h-12"
                    onClick={onMinusClick}
                    aria-label="ì„±ì¸ íƒ‘ìŠ¹ì í•œëª… ì¤„ì´ê¸°"
                  >
                    -
                  </button>
                  <input
                    id="adult-value-input"
                    className="text-4xl w-16 flex text-center px-4 mx-6 border-b border-black"
                    type="number"
                    inputMode="tel"
                    value={state.value}
                    onChange={onChange}
                  />

                  <button
                    className="border border-gray-600 rounded-full text-3xl flex justify-center items-center w-12 h-12"
                    onClick={onPlusClick}
                    aria-label="ì„±ì¸ íƒ‘ìŠ¹ì í•œëª… ëŠ˜ë¦¬ê¸°"
                  >
                    +
                  </button>
                  <p className="sr-only" role="status">
                    {state.alertMessage}
                  </p>
                </div>

                {state.validationMessage !== "" && (
                  <p
                    className="text-xs font-semibold text-red-500"
                    role="status"
                  >
                    {state.validationMessage}
                  </p>
                )}
              </section>
            </main>
          </React.Fragment>
        );
      };

      ReactDOM.render(<Component />, document.getElementById("root"));
    </script>
  </body>
</html>
